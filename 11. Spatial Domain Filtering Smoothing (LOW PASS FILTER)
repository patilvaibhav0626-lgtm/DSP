% AIM: To study spatial domain filtering smoothing (LOW PASS FILTER)
 clc;
 clear all;
 close all;
 % Read the input image (built-in grayscale image)
 a = imread('cameraman.tif');
 % Convert to grayscale only if the image is RGB
 if size(a, 3) == 3
    a = rgb2gray(a);
 end
 % Get image size
 [r, c] = size(a);
 % Display original image
 subplot(1,2,1);
 imshow(a);
 title('Original Image');
 % Define 3x3 Averaging Mask for smoothing (Low Pass Filter)
 M = (1/9) * [1 1 1; 1 1 1; 1 1 1];
 % Create an output image initialized to zeros
 b = zeros(r, c);
 % Perform spatial filtering (convolution)
 for x = 2:r-1
 for y = 2:c-1
        b(x, y) = a(x-1, y-1)*M(1,1) + a(x-1, y)*M(1,2) + a(x-1, y+1)*M(1,3) 
+ ...
                  a(x,   y-1)*M(2,1) + a(x,   y)*M(2,2) + a(x,   y+1)*M(2,3) 
+ ...
 end
 end
                  a(x+1, y-1)*M(3,1) + a(x+1, y)*M(3,2) + a(x+1, y+1)*M(3,3);
 % Display the smoothed (filtered) image
 subplot(1,2,2);
 imshow(uint8(b));
 title('Smoothed Image (Low Pass Filter)')
